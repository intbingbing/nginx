(function(){"use strict";var e={9296:function(e,t,s){var i=s(7820),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},r=[],o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-button",{attrs:{icon:"el-icon-full-screen",circle:""},on:{click:e.fullscreen}})},l=[],a={name:"Fullscreen",data(){return{isFullscreen:!1}},methods:{fullscreen(){this.isFullscreen?this.exitFullScreen():this.requestFullscreen(),this.isFullscreen=!this.isFullscreen},requestFullscreen(){const e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen()},exitFullScreen(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()}}},c=a,u=s(3952),m=(0,u.Z)(c,o,l,!1,null,"e9632570",null),p=m.exports,d={components:{Fullscreen:p}},f=d,h=(0,u.Z)(f,n,r,!1,null,null,null),g=h.exports,v=s(5967),b=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home-wrap"},[s("el-steps",{staticStyle:{"margin-bottom":"20px"},attrs:{active:e.active+1,simple:"","finish-status":"success"}},[s("el-step",{attrs:{title:"配置中心"}}),s("el-step",{attrs:{title:"结果预览"}}),s("el-step",{attrs:{title:"得分"}})],1),s("ConfigCenter",{directives:[{name:"show",rawName:"v-show",value:0==e.active,expression:"active == 0"}],ref:"ConfigCenter",attrs:{isActive:0==e.active,sampleIconList:e.sampleIconList}}),s("ResultPreview",{directives:[{name:"show",rawName:"v-show",value:1==e.active,expression:"active == 1"}],ref:"ResultPreview",attrs:{isActive:1==e.active,imgUrl:e.imgUrl}}),s("Distinguish",{directives:[{name:"show",rawName:"v-show",value:2==e.active,expression:"active == 2"}],ref:"Distinguish",attrs:{isActive:2==e.active,score:e.score}}),e.showDialog?s("TestPaper",{attrs:{"show-dialog":e.showDialog,distinguish:e.distinguish,sampleIconList:e.sampleIconListByTestPaper},on:{"update:showDialog":function(t){e.showDialog=t},"update:show-dialog":function(t){e.showDialog=t},submit:e.viewScore}}):e._e(),s("div",{staticClass:"btn-group"},[0!==e.active?s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.active--}}},[e._v("上一步")]):e._e(),2!==e.active?s("el-button",{attrs:{type:"primary"},on:{click:e.next}},[e._v("下一步")]):e._e()],1)],1)},w=[],y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",[s("div",{staticClass:"media-wrap"},[s("div",{staticStyle:{margin:"19px 213px"}},[s("el-radio",{attrs:{label:"按组选择"},model:{value:e.editType,callback:function(t){e.editType=t},expression:"editType"}},[e._v("按组选择")]),s("el-radio",{attrs:{label:"自由选择"},model:{value:e.editType,callback:function(t){e.editType=t},expression:"editType"}},[e._v("自由选择")])],1),s("el-form",{directives:[{name:"show",rawName:"v-show",value:"自由选择"===e.editType,expression:"editType === '自由选择'"}],ref:"form",staticStyle:{"padding-left":"200px"},attrs:{model:e.form,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"素材选择",prop:"annexFilesVideo"}},[e.form.annexFilesVideo?s("img",{staticClass:"front-material",attrs:{src:e.form.annexFilesVideo,alt:""}}):e._e(),s("el-button",{on:{click:function(t){e.showDialog=!0}}},[e._v(e._s(e.form.annexFilesVideo?"重新选择":"请选择"))])],1),s("el-form-item",{attrs:{label:"色系选择",prop:"color"}},[s("el-color-picker",{attrs:{"color-format":"rgb"},model:{value:e.form.color,callback:function(t){e.$set(e.form,"color",t)},expression:"form.color"}})],1),s("el-form-item",{attrs:{label:"色系噪声",prop:"color"}},[s("el-input-number",{attrs:{precision:2,step:.1,max:1,min:0},model:{value:e.form.colorNoise,callback:function(t){e.$set(e.form,"colorNoise",t)},expression:"form.colorNoise"}})],1),s("el-form-item",{attrs:{label:"图片尺寸",prop:"size"}},[s("el-input-number",{attrs:{min:200,step:100,max:500},model:{value:e.form.size,callback:function(t){e.$set(e.form,"size",t)},expression:"form.size"}})],1),s("el-form-item",{attrs:{label:"形状干扰",prop:"shapeNoise"}},[s("el-switch",{model:{value:e.form.shapeNoise,callback:function(t){e.$set(e.form,"shapeNoise",t)},expression:"form.shapeNoise"}})],1),s("el-form-item",{attrs:{label:"色盲类型",prop:"blindType"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.blindType,callback:function(t){e.$set(e.form,"blindType",t)},expression:"form.blindType"}},[s("el-option",{attrs:{label:"红",value:"red"}}),s("el-option",{attrs:{label:"绿",value:"green"}}),s("el-option",{attrs:{label:"蓝",value:"blue"}})],1)],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:"按组选择"===e.editType,expression:"editType === '按组选择'"}],staticStyle:{"margin-left":"213px"}},[s("el-radio",{attrs:{label:"0"},model:{value:e.groupId,callback:function(t){e.groupId=t},expression:"groupId"}},[e._v("数字")]),s("el-radio",{attrs:{label:"1"},model:{value:e.groupId,callback:function(t){e.groupId=t},expression:"groupId"}},[e._v("图形")]),s("el-radio",{attrs:{label:"2"},model:{value:e.groupId,callback:function(t){e.groupId=t},expression:"groupId"}},[e._v("字母")]),s("el-radio",{attrs:{label:"3"},model:{value:e.groupId,callback:function(t){e.groupId=t},expression:"groupId"}},[e._v("动物")])],1)],1),e.showDialog?s("ImageSelect",{attrs:{"show-dialog":e.showDialog,sampleIconList:e.sampleIconList},on:{"update:showDialog":function(t){e.showDialog=t},"update:show-dialog":function(t){e.showDialog=t},select:e.selectImg}}):e._e()],1)},_=[],I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{title:"素材选择",visible:!0,"close-on-click-modal":!1,"modal-append-to-body":!1},on:{close:function(t){return e.$emit("update:showDialog",!1)}}},[e._l(e.sampleIconList,(function(t){return s("div",{key:t,staticClass:"img-wrap",on:{click:function(s){e.selectImg=t}}},[s("img",{staticClass:"front-material",attrs:{src:t,alt:""}}),e.selectImg===t?s("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:""}}):e._e()],1)})),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{unlock:""},on:{click:function(t){return e.$emit("update:showDialog",!1)}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary",unlock:""},on:{click:e.submit}},[e._v("确 定")])],1)],2)},x=[],k={name:"ImageSelect",props:["sampleIconList"],data(){return{selectImg:null}},mounted(){},methods:{submit(){this.$emit("select",this.selectImg)}}},C=k,F=(0,u.Z)(C,I,x,!1,null,"6cfeba24",null),S=F.exports,T=s(6718),L=s.n(T),N=s(1691),$=s.n(N),D=s(9587);i["default"].use(D.ZP);var P=new D.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{}}),E=s(9035);const O="Admin-Token";function A(){return E.Z.get(O)}const z="http://106.12.125.115",j=L().create({baseURL:z+":8000"});j.interceptors.request.use((e=>(P.getters.token&&(e.headers["X-Token"]=A()),e)),(e=>(console.log(e),Promise.reject(e)))),j.interceptors.response.use((e=>{const t=e.data;return t.data}),(e=>(console.log("err"+e),(0,N.Message)({message:e.message,type:"error",duration:5e3}),Promise.reject(e))));var q=j;const R=e=>q({url:"/apis/generate_picture",method:"post",data:e}),Z=e=>q({url:"/apis/generate_picture_by_default_list",method:"post",data:e}),U=e=>q({url:"/apis/get_sample_icon_20",method:"post",data:e}),V=e=>q({url:"/apis/get_sample_icon_by_group",method:"post",data:e}),B=e=>q({url:"/apis/generate_picture_by_group",method:"post",data:e});var M={props:["isActive","sampleIconList"],components:{ImageSelect:S},data(){return{form:{annexFilesVideo:"",color:"rgb(81, 223, 36)",colorNoise:.3,size:200,shapeNoise:!1,blindType:"red"},annexFilesVideoList:[],showDialog:!1,editType:"按组选择",groupId:"0"}},watch:{sampleIconList(e){e&&(this.form.annexFilesVideo=e[0])}},mounted(){},methods:{async submit(){if("自由选择"===this.editType){const{annexFilesVideo:e,color:t,colorNoise:s,size:i,shapeNoise:n,blindType:r}=this.form,o={annexFilesVideo:e,color:t.split("(")[1].split(")")[0].split(",").map((e=>Number(e))),colorNoise:s,size:i,shapeNoise:n?1:0,blindType:r};return[await R(o)]}return await B({groupId:this.groupId})},selectImg(e){this.showDialog=!1,this.form.annexFilesVideo=e},remove(e){this[e]=[]},fileChange(e,t){"annexFilesImg"===t?this.annexFilesImgList=[e]:this.annexFilesVideoList=[e]}}},J=M,H=(0,u.Z)(J,y,_,!1,null,"4f4461ee",null),K=H.exports,X=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ResultPreview",staticStyle:{"text-align":"center"}},e._l(e.imgUrl,(function(t){return s("div",{key:t,staticClass:"img-wrap",on:{click:function(s){e.selectImg=t}}},[s("img",{attrs:{src:t,alt:""}}),e.selectImg===t?s("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:""}}):e._e()],1)})),0)},G=[],Q={name:"Preview",props:["imgUrl"],data(){return{active:0,selectImg:""}},watch:{imgUrl(e){1===e.length&&(this.selectImg=e[0])}},methods:{}},W=Q,Y=(0,u.Z)(W,X,G,!1,null,"ddae75fe",null),ee=Y.exports,te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"Distinguish",staticStyle:{"text-align":"center"}},[s("h1",{staticStyle:{margin:"auto"}},[e._v(" 答错："+e._s(e.score.err)+"，未作答："+e._s(e.score.timeout)+"，得分："+e._s(e.score.score)+"。 ")])])},se=[],ie={name:"Distinguish",props:["score"],data(){return{active:0}},mounted(){},methods:{}},ne=ie,re=(0,u.Z)(ne,te,se,!1,null,"9febe8da",null),oe=re.exports,le=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{visible:!0,"close-on-click-modal":!1,"show-close":!1,"custom-class":"flatten",fullscreen:!0,modal:!1},on:{close:function(t){return e.$emit("update:showDialog",!1)}}},[s("Fullscreen"),s("div",{staticClass:"wrap"},[s("h1",[e._v("视觉测试题")]),s("h4",[e._v("第 "+e._s(e.currentIndex+1)+" / "+e._s(e.distinguish.length)+" 题")]),e._l(e.distinguish,(function(t,i){return s("div",{key:i},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.currentIndex===i,expression:"currentIndex === i"}],staticClass:"img-wrap"},[s("el-image",{style:"width: "+e.getSize(t.testImg)+"px;height: "+e.getSize(t.testImg)+"px;margin-right: 30px;",attrs:{src:t.testImg,alt:""}})],1)])})),s("div",{staticClass:"answer-set"},[e._l(e.sampleIconList,(function(t,i){return s("div",{key:i,staticClass:"answer-img-wrap",on:{click:function(s){e.setAnswer(t),e.times=10}}},[s("img",{staticClass:"front-material",attrs:{src:t,alt:""}})])})),s("div",{staticClass:"answer-img-wrap front-material",staticStyle:{color:"white","font-size":"30px","line-height":"100px","text-align":"center"},on:{click:function(t){e.setAnswer(""),e.times=10}}},[e._v(" 不知道 ")])],2),s("h3",{staticClass:"time-out"},[e._v(" 请在"),s("span",{staticStyle:{color:"red"}},[e._v(e._s(e.times)+"s")]),e._v("内作答！ ")])],2)],1)},ae=[],ce={name:"TestPaper",props:["distinguish","sampleIconList"],components:{Fullscreen:p},data(){return{currentIndex:0,showDialog:!1,times:10}},mounted(){this.getTime()},methods:{setAnswer(e){if(this.distinguish[this.currentIndex].answer=e,this.distinguish.length-1===this.currentIndex){const e=this.distinguish.length;let t=0,s=0,i=0;this.distinguish.forEach((e=>{e.answer===e.labelImg?t++:e.answer?i++:s++})),this.$message({type:"success",message:"提交成功!"}),this.$emit("submit",{score:t/e*100,timeout:s,err:i}),clearInterval(this.timer)}else this.currentIndex++},getSize(e){const t=e.split("_");return t[t.length-2]},getTime(){this.timer=setInterval((()=>{this.times--,0===this.times&&(this.setAnswer(""),this.times=10)}),1e3)}}},ue=ce,me=(0,u.Z)(ue,le,ae,!1,null,"23465159",null),pe=me.exports;function de(e,t){switch(arguments.length){case 1:return parseInt(Math.random()*e+1,10);case 2:return parseInt(Math.random()*(t-e+1)+e,10);default:return 0}}var fe={name:"Home",components:{ConfigCenter:K,ResultPreview:ee,Distinguish:oe,TestPaper:pe},data(){return{active:0,imgUrl:[],distinguish:[],sampleIconList:[],showDialog:!1,score:0,sampleIconListByTestPaper:[]}},async mounted(){this.sampleIconList=await U()},methods:{viewScore(e){this.score=e,this.active=2,this.showDialog=!1},async next(){if(0===this.active)this.imgUrl=await this.$refs.ConfigCenter.submit(),this.active=1;else if(1===this.active){if("自由选择"===this.$refs.ConfigCenter.editType){const e=this.$refs.ResultPreview.selectImg,t=e.split("/");let s=t[t.length-1];s=s.split("_")[0].split("."),this.distinguish=[{labelImg:this.sampleIconList.filter((e=>e.includes("/"+s[0]+"."+s[1]+".png")))[0],testImg:this.$refs.ResultPreview.selectImg,answer:""}],this.sampleIconListByTestPaper=this.sampleIconList}else{const e=JSON.parse(JSON.stringify(this.imgUrl)),t=[];for(let i=0;i<10;i++)t.push(...e.splice(de(0,e.length-1),1));const s=e=>{let t=e.split("/"),s=t[t.length-1].split(".");return`${z}:8100/sample_icon_group/${s[0]}/${s[1].split("_")[0]}.png`};this.distinguish=t.map((e=>({labelImg:s(e),testImg:e,answer:""}))),this.sampleIconListByTestPaper=await V({groupId:this.$refs.ConfigCenter.groupId})}this.showDialog=!0}else 2===this.active&&(this.active=0)},async use_default_list(){if(0===this.active)this.imgUrl=await Z(),this.active=1;else if(1===this.active){const e=JSON.parse(JSON.stringify(this.imgUrl)),t=[];for(let i=0;i<10;i++)t.push(...e.splice(de(0,e.length-1),1));const s=e=>{let t=e.split("/"),s=t[t.length-1].split(".");const i=s[0]+"."+s[1];return[`${z}:8100/sample_icon_20/${i}.png`,i]};this.distinguish=t.map((e=>{const t=s(e);return{labelImg:t[0],testImg:e,answer:""}})),this.sampleIconListByTestPaper=this.sampleIconList,this.showDialog=!0}}}},he=fe,ge=(0,u.Z)(he,b,w,!1,null,"ff88d028",null),ve=ge.exports;i["default"].use(v.Z);const be=[{path:"/",name:"Home",component:ve},{path:"/Login",name:"Login",component:()=>s.e(443).then(s.bind(s,1993))}],we=new v.Z({mode:"history",base:"",routes:be});we.beforeEach((async(e,t,s)=>{const i="1"===localStorage.getItem("isLogin");i||e.path.includes("login")?s():s({path:"/login"})}));var ye=we;i["default"].use($()),i["default"].config.productionTip=!1,new i["default"]({router:ye,store:P,render:e=>e(g)}).$mount("#app")}},t={};function s(i){var n=t[i];if(void 0!==n)return n.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,s),r.exports}s.m=e,function(){var e=[];s.O=function(t,i,n,r){if(!i){var o=1/0;for(u=0;u<e.length;u++){i=e[u][0],n=e[u][1],r=e[u][2];for(var l=!0,a=0;a<i.length;a++)(!1&r||o>=r)&&Object.keys(s.O).every((function(e){return s.O[e](i[a])}))?i.splice(a--,1):(l=!1,r<o&&(o=r));if(l){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[i,n,r]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce((function(t,i){return s.f[i](e,t),t}),[]))}}(),function(){s.u=function(e){return"js/about.cb15892f.js"}}(),function(){s.miniCssF=function(e){return"css/about.e843c427.css"}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="color_blindness_front:";s.l=function(i,n,r,o){if(e[i])e[i].push(n);else{var l,a;if(void 0!==r)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var m=c[u];if(m.getAttribute("src")==i||m.getAttribute("data-webpack")==t+r){l=m;break}}l||(a=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.setAttribute("data-webpack",t+r),l.src=i),e[i]=[n];var p=function(t,s){l.onerror=l.onload=null,clearTimeout(d);var n=e[i];if(delete e[i],l.parentNode&&l.parentNode.removeChild(l),n&&n.forEach((function(e){return e(s)})),t)return t(s)},d=setTimeout(p.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=p.bind(null,l.onerror),l.onload=p.bind(null,l.onload),a&&document.head.appendChild(l)}}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p=""}(),function(){if("undefined"!==typeof document){var e=function(e,t,s,i,n){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css";var o=function(s){if(r.onerror=r.onload=null,"load"===s.type)i();else{var o=s&&("load"===s.type?"missing":s.type),l=s&&s.target&&s.target.href||t,a=new Error("Loading CSS chunk "+e+" failed.\n("+l+")");a.code="CSS_CHUNK_LOAD_FAILED",a.type=o,a.request=l,r.parentNode&&r.parentNode.removeChild(r),n(a)}};return r.onerror=r.onload=o,r.href=t,s?s.parentNode.insertBefore(r,s.nextSibling):document.head.appendChild(r),r},t=function(e,t){for(var s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var n=s[i],r=n.getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(r===e||r===t))return n}var o=document.getElementsByTagName("style");for(i=0;i<o.length;i++){n=o[i],r=n.getAttribute("data-href");if(r===e||r===t)return n}},i=function(i){return new Promise((function(n,r){var o=s.miniCssF(i),l=s.p+o;if(t(o,l))return n();e(i,l,null,n,r)}))},n={143:0};s.f.miniCss=function(e,t){var s={443:1};n[e]?t.push(n[e]):0!==n[e]&&s[e]&&t.push(n[e]=i(e).then((function(){n[e]=0}),(function(t){throw delete n[e],t})))}}}(),function(){var e={143:0};s.f.j=function(t,i){var n=s.o(e,t)?e[t]:void 0;if(0!==n)if(n)i.push(n[2]);else{var r=new Promise((function(s,i){n=e[t]=[s,i]}));i.push(n[2]=r);var o=s.p+s.u(t),l=new Error,a=function(i){if(s.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var r=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",l.name="ChunkLoadError",l.type=r,l.request=o,n[1](l)}};s.l(o,a,"chunk-"+t,t)}},s.O.j=function(t){return 0===e[t]};var t=function(t,i){var n,r,o=i[0],l=i[1],a=i[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(n in l)s.o(l,n)&&(s.m[n]=l[n]);if(a)var u=a(s)}for(t&&t(i);c<o.length;c++)r=o[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(u)},i=self["webpackChunkcolor_blindness_front"]=self["webpackChunkcolor_blindness_front"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(9296)}));i=s.O(i)})();