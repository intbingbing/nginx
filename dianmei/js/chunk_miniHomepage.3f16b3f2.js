(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk_miniHomepage","chunk-72b99b82","chunk-2d0d63ea"],{"0210":function(t,e,a){},"2ecf":function(t,e,a){"use strict";a("0210")},"3dd3":function(t,e,a){},"3fe3":function(t,e,a){"use strict";a.d(e,"c",(function(){return o})),a.d(e,"d",(function(){return s})),a.d(e,"a",(function(){return c})),a.d(e,"g",(function(){return u})),a.d(e,"e",(function(){return l})),a.d(e,"h",(function(){return d})),a.d(e,"f",(function(){return f})),a.d(e,"b",(function(){return p}));a("159b"),a("4de4");var n=a("b775"),i=a("da46"),r=a("ca00");function o(t){return Object(n["a"])({url:"/v1/module/homepage/_search",method:"post",data:t}).then((function(t){if(t.forEach((function(t){var e=i["moduleType"].filter((function(e){return e.value===t.moduleType}));t.moduleNote=e[0].label})),t.length>2){for(var e=0;e<2;e++)t[e].up=t[e].down=!1;for(var a=[],n=2;n<t.length;n++)a.push(t[n]);Object(r["a"])(a)}else for(var o=0;o<t.length;o++)t[o].up=t[o].down=!1;return Object(r["g"])(t)}))}function s(t){return Object(n["a"])({url:"/v1/activitys/_search",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/v1/module/homepage/addMarketing",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/v1/module/homepage/update/".concat(t.id),method:"put",data:t})}var l=u;function d(t){return Object(n["a"])({url:"/v1/module/_update",method:"put",data:t})}function f(t){return Object(n["a"])({url:"/v1/activitys/_update",method:"put",data:t})}function p(t){return Object(n["a"])({url:"/v1/module/homepage/addGroup",method:"post",data:t})}},"68a6":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{wrapClassName:"full-modal-wrap",title:t.type,destroyOnClose:!0,visible:t.visible,width:"60%",okText:"提交"},on:{cancel:t.close}},[a("Discount",{ref:"Discount",attrs:{defaultData:t.defaultData}}),a("ProjectList",{ref:"ProjectList",attrs:{defaultData:t.defaultData}}),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.close}},[t._v(" 取消 ")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.loading},on:{click:t.handleOk}},[t._v(" 提交 ")])],1)],2)},i=[],r=a("5530"),o=a("1da1"),s=(a("96cf"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("baseCard",{attrs:{title:"拼团模块"}},[a("a-form-model",{ref:"ruleForm",attrs:{rules:t.rules,model:t.form,layout:"inline"}},[a("a-form-model-item",{attrs:{label:"标题",prop:"title"}},[a("a-input",{attrs:{placeholder:"请输入"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("a-form-model-item",{attrs:{label:"上架",prop:"status"}},[a("a-radio-group",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("a-radio",{attrs:{value:1}},[t._v(" 上架 ")]),a("a-radio",{attrs:{value:0}},[t._v(" 下架 ")])],1)],1)],1)],1)}),c=[],u=(a("d3b7"),a("f6ef")),l=a("cd3f"),d=a.n(l),f=(a("7b0a"),a("c1df"),{title:void 0,status:1}),p={name:"discount",components:{baseCard:u["a"]},props:["defaultData"],data:function(){return{form:d()(f),rules:{title:[{required:!0,message:"请输入",trigger:"blur"}],status:[{required:!0,message:"请选择",trigger:"blur"}]}}},mounted:function(){this.defaultData&&(this.form={title:this.defaultData.title,status:this.defaultData.status})},methods:{check:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.$refs.ruleForm.validate((function(a){return e(!!a&&t.form)}))})));case 1:case"end":return e.stop()}}),e)})))()}}},m=p,h=a("2877"),v=Object(h["a"])(m,s,c,!1,null,null,null),b=v.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("baseCard",{attrs:{title:"添加拼团模块下的项目列表"}},[a("a-button",{staticClass:"margin-bottom-10",attrs:{type:"primary",icon:"plus"},on:{click:t.selectActivity}},[t._v(" 选择拼团活动 ")]),a("a-table",{ref:"table",attrs:{rowKey:"id",size:"small",columns:t.columns,dataSource:t.tableData,pagination:!1},scopedSlots:t._u([{key:"action",fn:function(e,n,i){return a("span",{},[[a("a-button",{attrs:{type:"link"},on:{click:function(e){return t.action("删除",n,i)}}},[t._v(" 删除 ")]),0===n.status&&1!==n.approvalStatus?a("span",[a("a-divider",{attrs:{type:"vertical"}}),a("a-button",{attrs:{type:"link"},on:{click:function(e){return t.action("编辑拼团活动",n)}}},[t._v(" 编辑拼团活动 ")])],1):t._e()]],2)}}])}),a("GroupActivity",{ref:"GroupActivity",on:{ok:t.setActivityList}}),a("Create",{ref:"Create",attrs:{parent:t.that}})],1)},g=[],k=(a("99af"),a("a15b"),a("d81d"),a("a434"),a("c740"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BaseModal",{ref:"BaseModal",attrs:{title:"选择拼团活动",showSearch:!1},on:{ok:t.handleOk}},[a("s-table",{ref:"table",attrs:{rowKey:"id",size:"small",columns:t.columns,data:t.loadData,condition:t.condition,"row-selection":t.rowSelection}})],1)}),w=[],O=(a("b0c0"),a("159b"),a("c593")),j=a("ab09"),_=a("3fe3"),x={name:"SelectGroup",components:{BaseModal:O["a"],STable:j["a"]},data:function(){return{columns:this.$tableConfig.groupModal.columns,condition:this.$tableConfig.groupModal.condition,loadData:function(t){return Object(_["d"])(Object(r["a"])(Object(r["a"])({},t),{},{approvalStatus:1,status:"0,1",type:7}))},selectList:[]}},computed:{rowSelection:function(){var t=this;return{getCheckboxProps:function(t){return{props:{disabled:"Disabled User"===t.name,name:t.name}}},selectedRowKeys:this.selectList.map((function(t){return t.id})),onSelect:function(e,a,n,i){a?t.selectList.push(e):t.selectList.splice(t.selectList.findIndex((function(t){return e.id===t.id})),1)},onSelectAll:function(e,a,n){console.log(e,a,n);var i=d()(t.selectList);if(e)n.forEach((function(e){var a=t.selectList.findIndex((function(t){return e.id===t.id}));-1===a&&i.push(e)}));else{var r=[];n.forEach((function(e){var a=t.selectList.findIndex((function(t){return e.id===t.id}));-1!==a&&r.push(a)})),r.sort((function(t,e){return e-t})).forEach((function(t){i.splice(t,1)}))}t.selectList=i}}}},created:function(){},mounted:function(){},methods:{handleOk:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$emit("ok",t.selectList);case 1:case"end":return e.stop()}}),e)})))()},open:function(t){this.selectList=d()(t),this.$refs.BaseModal.open()}}},D=x,$=Object(h["a"])(D,k,w,!1,null,"a6d49a36",null),C=$.exports,T=a("4e1d"),I={name:"projectList",components:{baseCard:u["a"],GroupActivity:C,Create:T["default"]},props:["defaultData"],data:function(){return{tableData:[],columns:[{title:"拼团活动名称",dataIndex:"name"},{title:"活动时间",customRender:function(t,e,a){return"".concat(e.startTime,"至").concat(e.endTime)}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],that:this}},mounted:function(){var t;null!==this&&void 0!==this&&null!==(t=this.defaultData)&&void 0!==t&&t.activityList&&(this.tableData=this.defaultData.activityList)},methods:{selectActivity:function(){this.$refs.GroupActivity.open(this.tableData)},setActivityList:function(t){this.tableData=t},check:function(){var t=this;return new Promise((function(e){t.tableData.length?e({content_id:t.tableData.map((function(t){return t.id})).join()}):(t.$message.error("请选择拼团活动！"),e(!1))}))},action:function(t,e,a){"编辑拼团活动"===t?this.$refs.Create.open(t,e):"删除"===t&&this.tableData.splice(a,1)},refresh:function(t){var e=this.tableData.findIndex((function(e){return e.id===t.id}));this.$set(this.tableData,e,t)}}},S=I,A=Object(h["a"])(S,y,g,!1,null,null,null),R=A.exports,L={components:{Discount:b,ProjectList:R},name:"group",props:["parent"],data:function(){return{visible:!1,type:"新增拼团",record:null,loading:!1,defaultData:{}}},mounted:function(){},methods:{handleOk:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.Discount.check();case 2:return a=e.sent,e.next=5,t.$refs.ProjectList.check();case 5:n=e.sent,a&&n&&(t.loading=!0,i="首页"===t.parent.pageName?1:2,"新增拼团"===t.type?Object(_["b"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({},a),n),{},{target:i})).then((function(e){t.loading=!1,t.visible=!1,t.$message.success(t.type+"成功！"),t.parent.refresh()})):Object(_["g"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({id:t.defaultData.id},a),n),{},{target:i})).then((function(e){t.loading=!1,t.visible=!1,t.$message.success(t.type+"成功！"),t.parent.refresh()})));case 7:case"end":return e.stop()}}),e)})))()},close:function(){this.visible=!1},open:function(t,e){this.visible=!0,this.type=t+"拼团",this.record=e,this.defaultData="编辑"===t?d()(e):null}}},N=L,M=Object(h["a"])(N,n,i,!1,null,"8616f6b8",null);e["default"]=M.exports},"6cb2":function(t,e,a){"use strict";a("3dd3")},7270:function(t,e,a){"use strict";a.r(e),a.d(e,"columns",(function(){return n})),a.d(e,"condition",(function(){return i}));var n=[{title:"#",scopedSlots:{customRender:"serial"}},{title:"栏位标题",dataIndex:"title"},{title:"类型",dataIndex:"moduleNote"},{title:"排序",dataIndex:"sort",scopedSlots:{customRender:"sort"}},{title:"上架",dataIndex:"statusNote"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],i=[]},"78c9":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("baseCard",{attrs:{title:"规则设置"}},[a("a-form-model",{ref:"ruleForm",attrs:{rules:t.rules,model:t.form,labelAlign:"right","label-col":{span:4},"wrapper-col":{span:18}}},[a("a-form-model-item",{attrs:{label:"有效时间",prop:"time",required:!0}},[a("a-range-picker",{attrs:{placeholder:["请选择生效时间","请选择过期时间"],"show-time":""},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}})],1),a("a-form-model-item",{attrs:{label:"上架",prop:"status",required:!0}},[a("a-radio-group",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("a-radio",{attrs:{value:1}},[t._v(" 上架 ")]),a("a-radio",{attrs:{value:0}},[t._v(" 下架 ")])],1)],1)],1)],1)},i=[],r=a("1da1"),o=(a("96cf"),a("d3b7"),a("f6ef")),s=a("cd3f"),c=a.n(s),u=(a("7b0a"),a("c1df")),l=a.n(u),d={time:void 0,status:1},f={name:"carousel",components:{baseCard:o["a"]},props:["record"],data:function(){return{form:c()(d),rules:{time:[{required:!0,message:"请选择",trigger:"blur"}]}}},created:function(){if(this.record){var t=this.record,e=t.startTime,a=t.endTime;this.form={time:e&&a?[l()(this.record.startTime),l()(this.record.endTime)]:null,status:this.record.status}}},methods:{check:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.$refs.ruleForm.validate((function(a){if(a){var n=t.form,i=n.time,r=n.status;return e({startTime:i[0].format(t.$ds),endTime:i[1].format(t.$ds),status:r})}return e(!1)}))})));case 1:case"end":return e.stop()}}),e)})))()}}},p=f,m=a("2877"),h=Object(m["a"])(p,n,i,!1,null,null,null);e["a"]=h.exports},"89c0":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{staticClass:"height-modal",attrs:{title:t.type,destroyOnClose:!0,visible:t.visible,width:"80%"},on:{cancel:t.close}},[a("a-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary",icon:"plus"},on:{click:function(e){return t.action("新增轮播图",null)}}},[t._v(" 新增轮播图 ")]),a("a-table",{ref:"table",attrs:{rowKey:"id",size:"small",columns:t.columns,dataSource:t.tableData,condition:t.condition,pagination:!1,scroll:{y:400}},scopedSlots:t._u([{key:"image",fn:function(t){return a("span",{},[a("img",{attrs:{src:t}})])}},{key:"action",fn:function(e,n,i){return a("span",{},[[n.down?a("span",[a("a-icon",{attrs:{type:"arrow-down"},on:{click:function(e){return t.swap("down",i,n)}}}),t._v(" "),a("a-divider",{attrs:{type:"vertical"}})],1):t._e(),n.up?a("span",[a("a-icon",{attrs:{type:"arrow-up"},on:{click:function(e){return t.swap("up",i,n)}}}),t._v(" "),a("a-divider",{attrs:{type:"vertical"}})],1):t._e(),a("a-icon",{attrs:{type:"edit"},on:{click:function(e){return t.action("编辑轮播图",n)}}}),a("a-divider",{attrs:{type:"vertical"}}),a("a-icon",{attrs:{type:"delete"},on:{click:function(e){return t.del(n)}}})]],2)}}])}),a("Create",{ref:"Create",on:{create:t.create,edit:t.edit}}),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.close}},[t._v(" 取消 ")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.loading},on:{click:t.handleOk}},[t._v(" 提交 ")])],1)],2)},i=[],r=a("5530"),o=(a("d81d"),a("a434"),a("c740"),a("e876")),s=a("ab09"),c=(a("99af"),[{title:"图片",dataIndex:"image",scopedSlots:{customRender:"image"},width:150},{title:"活动",dataIndex:"activityName",ellipsis:!0},{title:"跳转链接",dataIndex:"activityUrl",ellipsis:!0,width:300},{title:"有效时间",dataIndex:"time",customRender:function(t,e,a){return"".concat(e.startTime,"至").concat(e.endTime)},ellipsis:!0,width:300},{title:"上架",dataIndex:"status",customRender:function(t,e,a){return t?"上架":"下架"},width:60},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},width:150}]),u=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.visible?a("a-modal",{attrs:{wrapClassName:"full-modal-wrap",title:t.type,destroyOnClose:!0,visible:t.visible,width:"60%",okText:"提交"},on:{cancel:t.close}},[a("Carousel",{ref:"Carousel",attrs:{record:t.record}}),a("RuleSetting",{ref:"RuleSetting",attrs:{record:t.record}}),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.close}},[t._v(" 取消 ")]),a("a-button",{key:"submit",attrs:{type:"primary"},on:{click:t.handleOk}},[t._v(" 提交 ")])],1)],2):t._e()},d=[],f=a("1da1"),p=(a("96cf"),a("9334")),m=a("78c9"),h=a("ca00"),v={components:{Carousel:p["a"],RuleSetting:m["a"]},data:function(){return{visible:!1,type:"新增轮播图",record:null}},created:function(){},mounted:function(){},methods:{handleOk:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.Carousel.check();case 2:return a=e.sent,e.next=5,t.$refs.RuleSetting.check();case 5:n=e.sent,n&&a&&(t.visible=!1,"新增轮播图"===t.type?t.$emit("create",Object(r["a"])(Object(r["a"])(Object(r["a"])({},n),a),{},{id:Object(h["b"])()})):t.$emit("edit",Object(r["a"])(Object(r["a"])(Object(r["a"])({},n),a),{},{id:t.record.id})));case 7:case"end":return e.stop()}}),e)})))()},close:function(){this.visible=!1},open:function(t,e){this.visible=!0,this.type=t,this.record=e}}},b=v,y=a("2877"),g=Object(y["a"])(b,l,d,!1,null,"02d077dd",null),k=g.exports,w=a("cd3f"),O=a.n(w),j={name:"carousel",components:{STable:s["a"],Create:k},props:["pageName","parent"],data:function(){return{visible:!1,type:"轮播图列表",columns:c,condition:u,tableData:[],loading:!1,record:null}},mounted:function(){},methods:{handleOk:function(){var t=this;this.loading=!0;var e=2;"首页"===this.pageName&&(e=1),"编辑轮播图"===this.type&&Object(o["e"])({type:e,carouselVOS:this.tableData.map((function(t,e){return Object(r["a"])(Object(r["a"])({},t),{},{sort:e})})),id:this.record.id}).then((function(e){t.$message.success("提交成功！"),t.visible=!1,t.loading=!1,t.parent.refresh()})),"新增轮播图"===this.type&&Object(o["a"])({type:e,carouselVOS:this.tableData.map((function(t,e){return Object(r["a"])(Object(r["a"])({},t),{},{sort:e})}))}).then((function(e){t.$message.success("提交成功！"),t.visible=!1,t.loading=!1,t.parent.refresh()}))},close:function(){this.visible=!1,this.loading=!1},open:function(t,e){var a=this;this.visible=!0,this.record=e,this.type=t+"轮播图","编辑"===t&&Object(o["b"])({id:e.id,moduleType:1,target:e.target}).then((function(t){a.tableData=Object(h["a"])(t).sort((function(t,e){return t.sort-e.sort}))})),"新增"===t&&(this.tableData=[])},action:function(t,e){this.$refs.Create.open(t,e)},del:function(t){var e=O()(this.tableData);e.splice(e.findIndex((function(e){return t.id===e.id})),1),this.tableData=Object(h["a"])(e)},create:function(t){var e=O()(this.tableData);e.push(t),this.tableData=Object(h["a"])(e)},edit:function(t){var e=O()(this.tableData);e[e.findIndex((function(e){return t.id===e.id}))]=t,this.tableData=Object(h["a"])(e)},swap:function(t,e,a){var n=O()(this.tableData);"up"===t?Object(h["d"])(n,e,e-1):Object(h["d"])(n,e,e+1),this.tableData=Object(h["a"])(n)}}},_=j,x=(a("c95b"),Object(y["a"])(_,n,i,!1,null,"baf76438",null));e["a"]=x.exports},9002:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"form"},[t._v(" 组件名称： "),a("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.$dict.moduleType.filter((function(t){return[5,9].includes(t.value)})),(function(e){return a("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1),a("a-button",{attrs:{type:"primary",disabled:!t.type},on:{click:function(e){return t.action("新增",t.type,null)}}},[t._v(" 新建 ")])],1),a("s-table",{ref:"table",attrs:{rowKey:"id",columns:t.columns,data:t.loadData,condition:t.condition,showPagination:!1},scopedSlots:t._u([{key:"serial",fn:function(e,n,i){return a("span",{},[t._v(" "+t._s(i+1)+" ")])}},{key:"sort",fn:function(e,n,i){return a("span",{},[n.down||n.up?t._e():a("span",[t._v("不可编辑")]),n.down?a("span",[a("a-icon",{attrs:{type:"arrow-down"},on:{click:function(e){return t.swap(i+1,i,n)}}})],1):t._e(),n.up?a("span",[a("a-icon",{attrs:{type:"arrow-up"},on:{click:function(e){return t.swap(i-1,i,n)}}})],1):t._e()])}},{key:"action",fn:function(e,n,i){return a("span",{},[[a("a-button",{attrs:{type:"link",disabled:1===i},on:{click:function(e){return t.action("编辑",n.moduleType,n)}}},[t._v(" 编辑 ")]),a("a-divider",{attrs:{type:"vertical"}}),i<2?a("a-button",{attrs:{type:"link",disabled:!0}},[t._v(" "+t._s(n.status?"下架":"上架")+" ")]):a("a-popconfirm",{attrs:{title:"确定"+(n.status?"下架":"上架")+"?","ok-text":"是","cancel-text":"否"},on:{confirm:function(e){return t.action("上下架",n.moduleType,n)}}},[a("a-button",{attrs:{type:"link"}},[t._v(" "+t._s(n.status?"下架":"上架")+" ")])],1),a("a-divider",{attrs:{type:"vertical"}}),i<2?a("a-button",{attrs:{type:"link",disabled:!0}},[t._v(" 删除 ")]):a("a-popconfirm",{attrs:{title:"确定删除?","ok-text":"是","cancel-text":"否"},on:{confirm:function(e){return t.action("删除",n.moduleType,n)}}},[a("a-button",{attrs:{type:"link"}},[t._v(" 删除 ")])],1)]],2)}}])}),a("Carousel",{ref:"Carousel",attrs:{parent:t.that,pageName:t.pageName}}),a("EditGroup",{ref:"EditGroup",attrs:{parent:t.that}}),a("MarketingActivity",{ref:"MarketingActivity",attrs:{parent:t.that}})],1)},i=[],r=(a("4de4"),a("da46")),o=a("7270"),s=a("3fe3"),c=a("e876"),u=a("ab09"),l=a("89c0"),d=a("68a6"),f=a("d348"),p={components:{STable:u["a"],Carousel:l["a"],EditGroup:d["default"],MarketingActivity:f["default"]},data:function(){return{type:void 0,moduleType:r["moduleType"].filter((function(t){return t.value<6})),columns:o["columns"],queryParam:{},condition:o["condition"],loadData:function(t){return Object(s["c"])(t)},that:this,pageName:"首页"}},methods:{action:function(t,e,a){var n=this;"编辑"===t||"新增"===t?(1===e&&this.$refs.Carousel.open(t,a),5===e&&this.$refs.MarketingActivity.open(t,a),9===e&&this.$refs.EditGroup.open(t,a)):"上下架"===t?Object(s["h"])({moduleFields:[{fieldName:"id",fieldValue:a.id},{fieldName:"status",fieldValue:a.status?0:1}]}).then((function(t){n.$message.success("".concat(a.status?"下架":"上架","成功！")),n.refresh()})):"删除"===t&&Object(s["h"])({moduleFields:[{fieldName:"id",fieldValue:a.id},{fieldName:"is_delete",fieldValue:1}]}).then((function(t){n.$message.success("删除成功！"),n.refresh()}))},swap:function(t,e,a){var n=this;Object(c["c"])({before:this.$refs.table.localDataSource[t].id,after:this.$refs.table.localDataSource[e].id,type:1}).then((function(t){n.$message.success("排序成功！"),n.refresh()}))},refresh:function(){this.$refs.table.refresh()}}},m=p,h=(a("2ecf"),a("2877")),v=Object(h["a"])(m,n,i,!1,null,"0577fb74",null);e["default"]=v.exports},9334:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("baseCard",{attrs:{title:"轮播图"}},[a("a-form",{ref:"ruleForm",staticClass:"form",attrs:{model:t.form,labelAlign:"right","label-col":{span:4},"wrapper-col":{span:18}}},[a("a-form-item",{attrs:{label:"上传图片",prop:"image",required:!0}},[a("ImgUpload",{model:{value:t.form.image,callback:function(e){t.$set(t.form,"image",e)},expression:"form.image"}}),a("div",{staticClass:"red"},[t._v(t._s(t.err.img))]),a("div",{staticClass:"tip"},[t._v("建议尺寸：750*562")])],1),a("a-form-item",{attrs:{label:"跳转地址",prop:"toPath",required:!0}},[a("a-radio-group",{staticStyle:{width:"100%"},model:{value:t.form.jumpType,callback:function(e){t.$set(t.form,"jumpType",e)},expression:"form.jumpType"}},[a("a-radio",{attrs:{value:1}},[t._v(" 跳转活动 ")]),a("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择活动类型"},on:{change:t.activityTypeChange},model:{value:t.form.activityType,callback:function(e){t.$set(t.form,"activityType",e)},expression:"form.activityType"}},t._l(t.$dict.activityType,(function(e){return a("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1),a("a-select",{staticStyle:{width:"250px","margin-left":"10px"},attrs:{placeholder:"选择跳转的活动"},on:{change:t.activityIdChange},model:{value:t.form.activityId,callback:function(e){t.$set(t.form,"activityId",e)},expression:"form.activityId"}},t._l(t.activityList,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.activityId}},[t._v(t._s(e.activityName))])})),1),a("br"),a("a-radio",{attrs:{value:2}},[t._v(" 跳转链接 ")]),a("a-input",{staticStyle:{width:"460px","margin-top":"10px"},attrs:{placeholder:"请输入"},model:{value:t.form.activityUrl,callback:function(e){t.$set(t.form,"activityUrl",e)},expression:"form.activityUrl"}}),a("div",{staticClass:"red"},[t._v(t._s(t.err.toPath))])],1)],1)],1)],1)},i=[],r=(a("d81d"),a("b0c0"),a("159b"),a("99af"),a("f6ef")),o=a("3fe3"),s=a("7b0a"),c=a("d549"),u=a("cd3f"),l=a.n(u),d={image:"",activityId:void 0,activityType:void 0,activityUrl:"",jumpType:1},f={name:"carousel",components:{baseCard:r["a"],ImgUpload:c["a"]},props:["record"],data:function(){return{form:l()(d),activityList:[],err:{img:"",toPath:""},defaultValue:null}},created:function(){var t=this,e=this.record;if(e){e.image,e.activityId,e.activityType,e.activityUrl;var a=e.jumpType,n=l()(e);1===a&&(n.activityUrl=""),this.form=n,Object(o["d"])({type:e.activityType,page:1,pageSize:1e4}).then((function(e){t.activityList=e.data.map((function(t){return{activityName:t.name,activityId:t.id}}))}))}},methods:{activityTypeChange:function(t){var e=this;this.form.activityId=void 0,Object(o["d"])({type:t,page:1,pageSize:1e4}).then((function(t){e.activityList=t.data.map((function(t){return{activityName:t.name,activityId:t.id}}))}))},activityIdChange:function(t){var e=this;this.form.activityId=t,this.activityList.forEach((function(a){a.activityId===t&&(e.form.activityName=a.activityName)}))},check:function(){var t=this.form,e=t.image,a=t.activityId,n=t.activityType,i=t.activityUrl,r=t.jumpType;if(Object(s["a"])(e)?this.err.img="请上传图片":this.err.img="",1===r?Object(s["a"])(a)?this.err.toPath="请选择跳转的活动":this.err.toPath="":Object(s["d"])(i)?this.err.toPath="":this.err.toPath="请输入正确的链接",!this.err.img&&!this.err.toPath){var o={image:e,jumpType:r};return 1===r?(this.activityList.forEach((function(t){t.activityId===a&&(o.activityName=t.activityName)})),o.activityType=n,o.activityId=a,o.activityUrl="/pages/homeActiveDetail/homeActiveDetail?moduleType=".concat(n,"&id=").concat(a,"&title=").concat(o.activityName)):(o.activityName=void 0,o.activityType=void 0,o.activityId=void 0,o.activityUrl=i),o}return!1}}},p=f,m=(a("6cb2"),a("2877")),h=Object(m["a"])(p,n,i,!1,null,"19f4f664",null);e["a"]=h.exports},c95b:function(t,e,a){"use strict";a("cd23")},cd23:function(t,e,a){},d348:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:t.type,destroyOnClose:!0,visible:t.visible,width:"60%",okText:"提交",wrapClassName:"full-modal-wrap"},on:{cancel:t.close}},[a("MarketingActivityInfo",{ref:"MarketingActivityInfo",attrs:{defaultData:t.defaultData}}),a("AddMarketingActivity",{ref:"AddMarketingActivity",attrs:{defaultData:t.defaultData}}),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.close}},[t._v(" 取消 ")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.loading},on:{click:t.handleOk}},[t._v(" 提交 ")])],1)],2)},i=[],r=a("5530"),o=a("1da1"),s=(a("96cf"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("baseCard",{attrs:{title:"营销活动模块信息"}},[a("a-form-model",{ref:"ruleForm",attrs:{rules:t.rules,model:t.form,layout:"inline"}},[a("a-row",{attrs:{gutter:20}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"标题",prop:"title"}},[a("a-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"上架",prop:"status"}},[a("a-radio-group",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("a-radio",{attrs:{value:1}},[t._v(" 上架 ")]),a("a-radio",{attrs:{value:0}},[t._v(" 下架 ")])],1)],1)],1)],1)],1)],1)}),c=[],u=(a("d3b7"),a("f6ef")),l=a("cd3f"),d=a.n(l),f={title:"",status:1},p={name:"marketingActivityInfo",components:{baseCard:u["a"]},props:["defaultData"],data:function(){return{form:d()(f),rules:{title:[{required:!0,message:"请输入",trigger:"blur"}],status:[{required:!0,message:"请选择",trigger:"blur"}]}}},created:function(){if(this.defaultData){var t=this.defaultData,e=t.title,a=t.status;this.form={title:e,status:a}}},methods:{check:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.$refs.ruleForm.validate((function(a){return e(!!a&&t.form)}))})));case 1:case"end":return e.stop()}}),e)})))()}}},m=p,h=a("2877"),v=Object(h["a"])(m,s,c,!1,null,null,null),b=v.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("baseCard",{attrs:{title:"添加营销活动"}},[a("a-button",{staticClass:"margin-bottom-10",attrs:{type:"primary",icon:"plus"},on:{click:t.selectActivity}},[t._v(" 选择营销活动 ")]),a("a-table",{ref:"table",attrs:{rowKey:"id",columns:t.columns,dataSource:t.tableData,pagination:!1,size:"small"},scopedSlots:t._u([{key:"action",fn:function(e,n,i){return a("span",{},[[n.down?a("span",[a("a-icon",{attrs:{type:"arrow-down"},on:{click:function(e){return t.swap("down",i,n)}}}),t._v(" "),a("a-divider",{attrs:{type:"vertical"}})],1):t._e(),n.up?a("span",[a("a-icon",{attrs:{type:"arrow-up"},on:{click:function(e){return t.swap("up",i,n)}}}),t._v(" "),a("a-divider",{attrs:{type:"vertical"}})],1):t._e(),a("a-icon",{attrs:{type:"delete"},on:{click:function(e){return t.del(n)}}})]],2)}}])}),a("ActivityList",{ref:"ActivityList",on:{ok:t.setActivityList}})],1)},g=[],k=(a("99af"),a("a15b"),a("d81d"),a("a434"),a("c740"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BaseModal",{ref:"BaseModal",attrs:{title:"选择活动列表",showSearch:!1},on:{ok:t.handleOk}},[a("s-table",{ref:"table",attrs:{rowKey:"id",size:"small",columns:t.columns,data:t.loadData,condition:t.condition,"row-selection":t.rowSelection}})],1)}),w=[],O=(a("b0c0"),a("c593")),j=a("ab09"),_=a("3fe3"),x={name:"SelectActivity",components:{BaseModal:O["a"],STable:j["a"]},data:function(){return{columns:[{title:"活动名称",dataIndex:"name"},{title:"有效期",customRender:function(t,e,a){return"".concat(e.startTime,"至").concat(e.endTime)}}],condition:[{title:"活动名称",dataIndex:"name",type:"input",span:16}],loadData:function(t){return Object(_["d"])(Object(r["a"])(Object(r["a"])({},t),{},{type:3}))},selectList:[]}},computed:{rowSelection:function(){var t=this;return{onChange:function(e,a){t.selectList=a},getCheckboxProps:function(t){return{props:{disabled:"Disabled User"===t.name,name:t.name}}},selectedRowKeys:this.selectList.map((function(t){return t.id}))}}},created:function(){},mounted:function(){},methods:{handleOk:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$emit("ok",t.selectList);case 1:case"end":return e.stop()}}),e)})))()},open:function(t,e){this.selectList=t,this.params={type:e.value},this.$refs.BaseModal.open()}}},D=x,$=Object(h["a"])(D,k,w,!1,null,"14c99320",null),C=$.exports,T=a("ca00"),I={name:"addMarketingActivity",components:{baseCard:u["a"],ActivityList:C},props:["defaultData"],data:function(){return{tableData:[],columns:[{title:"活动名称",dataIndex:"name"},{title:"有效期",customRender:function(t,e,a){return"".concat(e.startTime,"至").concat(e.endTime)}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}]}},mounted:function(){var t;null!==this&&void 0!==this&&null!==(t=this.defaultData)&&void 0!==t&&t.activityList&&(this.tableData=Object(T["a"])(this.defaultData.activityList))},methods:{selectActivity:function(t){this.$refs.ActivityList.open(this.tableData,t)},setActivityList:function(t){this.tableData=Object(T["a"])(t)},check:function(){return this.tableData.length?{content_id:this.tableData.map((function(t){return t.id})).join()}:(this.$message.error("请选择营销活动！"),!1)},action:function(t,e,a){"删除"===t&&this.tableData.splice(a,1)},del:function(t){var e=d()(this.tableData);e.splice(e.findIndex((function(e){return t.id===e.id})),1),this.tableData=Object(T["a"])(e)},swap:function(t,e,a){var n=d()(this.tableData);"up"===t?Object(T["d"])(n,e,e-1):Object(T["d"])(n,e,e+1),this.tableData=Object(T["a"])(n)}}},S=I,A=Object(h["a"])(S,y,g,!1,null,null,null),R=A.exports,L={components:{MarketingActivityInfo:b,AddMarketingActivity:R},name:"marketingActivity",props:["parent"],data:function(){return{visible:!1,type:"拼团",record:null,loading:!1,defaultData:{}}},created:function(){},mounted:function(){},methods:{handleOk:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.MarketingActivityInfo.check();case 2:return a=e.sent,e.next=5,t.$refs.AddMarketingActivity.check();case 5:n=e.sent,a&&n&&(t.visible=!1,"新增营销活动"===t.type?Object(_["a"])(Object(r["a"])(Object(r["a"])({},a),n)).then((function(e){t.$message.success("新建成功"),t.parent.refresh()})):Object(_["e"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({},a),n),{},{id:t.defaultData.id})).then((function(e){t.$message.success("更新成功"),t.parent.refresh()})));case 7:case"end":return e.stop()}}),e)})))()},close:function(){this.visible=!1},open:function(t,e){this.visible=!0,this.type=t+"营销活动",this.record=e,this.defaultData="编辑"===t?d()(e):null}}},N=L,M=Object(h["a"])(N,n,i,!1,null,"58bf3248",null);e["default"]=M.exports},d549:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-upload",{staticClass:"avatar-uploader",attrs:{"list-type":"picture-card","show-upload-list":!1,action:t.host,"before-upload":t.beforeUpload,disabled:t.disabled,method:"put",customRequest:t.customRequest},on:{change:t.handleChange}},[t.url?a("img",{staticStyle:{height:"106px"},attrs:{src:t.url,alt:"avatar"}}):a("div",[a("a-icon",{attrs:{type:t.loading?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v("请上传")])],1)])},i=[],r=a("1da1"),o=(a("b0c0"),a("96cf"),a("b775")),s=(a("e876"),a("bc3a")),c=a.n(s),u={name:"ImgUpload",props:["value","disabled"],data:function(){return{url:"",loading:!1,host:o["b"].upload}},created:function(){this.value&&(this.url=this.value)},methods:{handleChange:function(t){if("uploading"!==t.file.status){if("done"===t.file.status){var e=t.file.response.data[0].fileUrl;this.url=e,this.$emit("input",e),this.loading=!1}}else this.loading=!0},beforeUpload:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n="image/jpeg"===t.type||"image/png"===t.type,n||e.$message.error("You can only upload JPG file!"),i=t.size/1024/1024<2,i||e.$message.error("Image must smaller than 2MB!"),a.abrupt("return",n&&i);case 5:case"end":return a.stop()}}),a)})))()},customRequest:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,i,r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=t.file,e.loading=!0,i=e.host+"/"+n.name,r={method:"put",url:i,headers:{"Content-Type":"image/jpeg"},data:n},o=e,c()(r).then((function(t){var e=i;o.url=e,o.$emit("input",e),o.loading=!1})).catch((function(t){o.$message.error(t)}));case 6:case"end":return a.stop()}}),a)})))()}}},l=u,d=a("2877"),f=Object(d["a"])(l,n,i,!1,null,null,null);e["a"]=f.exports},e876:function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"d",(function(){return r})),a.d(e,"e",(function(){return o})),a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return c}));var n=a("b775");function i(t){return Object(n["a"])({url:"/v1/module/sort",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/v1/activity/_update",method:"put",data:t})}function o(t){return Object(n["a"])({url:"/v1/module/windows/".concat(t.id),method:"put",data:t})}function s(t){return Object(n["a"])({url:"/v1/module/windows",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/v1/module/windows/_search",method:"post",data:t})}}}]);