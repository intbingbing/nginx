(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk_activityGroup"],{"8b6e":function(t,e,a){},e54f:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",[a("div",{staticClass:"table-wrap"},[a("a-modal",{attrs:{visible:t.visible,destroyOnClose:"",footer:null},on:{cancel:function(e){t.visible=!1}}},[a("div",{staticClass:"apply-info"},[t._v("请选择批量审批状态")]),a("div",{staticClass:"apply-son",on:{click:function(e){return t.changeApplyState(0)}}},[t._v("保持为：待审批")]),a("div",{staticClass:"apply-son",on:{click:function(e){return t.changeApplyState(1)}}},[t._v("更新为：审批同意")]),a("div",{staticClass:"apply-son",on:{click:function(e){return t.changeApplyState(2)}}},[t._v("更新为：审批拒绝")])]),a("div",{staticClass:"tab-wall"},[a("div",{staticClass:"item",on:{click:function(e){return t.tabClick(null)}}},[a("div",{staticClass:"text",class:{"text-active":null==t.tabKey}},[t._v("全部")]),null==t.tabKey?a("span"):t._e()]),a("div",{staticClass:"item",on:{click:function(e){return t.tabClick(0)}}},[a("div",{staticClass:"text",class:{"text-active":0==t.tabKey}},[t._v("待审批")]),0==t.tabKey?a("span"):t._e()]),a("div",{staticClass:"item",on:{click:function(e){return t.tabClick(1)}}},[a("div",{staticClass:"text",class:{"text-active":1==t.tabKey}},[t._v("审批同意")]),1==t.tabKey?a("span"):t._e()])]),a("div",{staticClass:"input-wall"},[a("span",[t._v("分公司小程序名称：")]),a("a-select",{staticStyle:{width:"260px","margin-right":"20px"},attrs:{"default-value":"appletsManageId",disabled:!0},on:{change:t.handleChange}},[a("a-select-option",{attrs:{value:"appletsManageId"}},[t._v(" 上海永琪小程序 ")])],1),a("span",[t._v("活动名称：")]),a("a-input",{staticStyle:{width:"260px","margin-right":"30px"},attrs:{placeholder:"请输入活动名称："},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.buttonActiveClick("查询")}}},[t._v("查询")]),a("a-button",{on:{click:function(e){return t.buttonActiveClick("重置")}}},[t._v(" 重置")])],1),t.selectedAll.length>0?a("div",{staticClass:"alert-wall"},[a("div",[t._v("已选择"+t._s(t.selectedAll.length)+"项")]),a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:t.selectAllClick}},[t._v("审批")])],1):t._e(),a("a-table",{staticClass:"table",attrs:{columns:t.columns,"row-selection":{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},pagination:t.pagination,rowKey:function(t,e){return e},"data-source":t.data,size:"small"},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"startTime",fn:function(e,n){return a("span",{},[[a("span",[t._v(t._s(n.startTime)+" "),a("br"),t._v("至 "+t._s(n.endTime))])]],2)}},{key:"status",fn:function(e,n){return a("span",{},[[a("span",[t._v(t._s(0==n.status?"未开始":""))]),a("span",[t._v(t._s(1==n.status?"进行中":""))]),a("span",[t._v(t._s(2==n.status?"进行中":""))])]],2)}},{key:"action",fn:function(e,n){return a("span",{},[[a("a",{on:{click:function(e){return t.actionClick("审核",n)}}},[t._v("审核")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(e){return t.actionClick("查看",n)}}},[t._v("查看")])]],2)}}])}),a("Create",{ref:"Create"})],1)])},i=[],s=(a("b0c0"),a("159b"),a("a15b"),a("eec7")),l=a("4e1d"),c=[{title:"#",scopedSlots:{customRender:"serial"}},{dataIndex:"appletsName",key:"appletsName",title:"分公司小程序名称",scopedSlots:{customRender:"name"}},{title:"活动名称",dataIndex:"name",key:"name"},{title:"有效时间",dataIndex:"startTime",key:"startTime",scopedSlots:{customRender:"startTime"}},{title:"活动状态",key:"status",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"开团数",key:"group",dataIndex:"group",sorter:function(t,e){return t.group-e.group}},{title:"成团数",key:"groupSuccess",dataIndex:"groupSuccess",sorter:function(t,e){return t.groupSuccess-e.groupSuccess}},{title:"参团数",key:"order",dataIndex:"order",sorter:function(t,e){return t.order-e.order}},{title:"成团数",key:"orderSuccess",dataIndex:"orderSuccess",sorter:function(t,e){return t.orderSuccess-e.orderSuccess}},{title:"总部审批",key:"approvalStatusNote",dataIndex:"approvalStatusNote",scopedSlots:{customRender:"approvalStatusNote"}},{title:"操作",key:"actions",dataIndex:"action",scopedSlots:{customRender:"action"}}],o={data:function(){return{selectedRowKeys:[],selectedAll:[],data:[],columns:c,visible:!1,postApplyState:"0",pagination:{total:0,pageSize:10},page:1,tabKey:null,appletsManageId:1,name:null,type:7,recordrow:null,userName:storage.get("user").userName}},components:{Create:l["default"]},created:function(){this.initActivityManage()},methods:{handleChange:function(t){console.log(t),this.name=t},handleTableChange:function(t){console.log(t),this.page=t.current,this.pagination.total=t.pageSize,this.initActivityManage()},tabClick:function(t){this.tabKey=t,this.initActivityManage()},initActivityManage:function(){var t=this,e={name:this.name,approvalStatus:this.tabKey,type:7,page:this.page,pageSize:this.pagination.pageSize,appletsManageId:this.appletsManageId};Object(s["a"])(e).then((function(e){t.data=e.data,t.pagination.total=e.totalSize,t.pagination.page=e.currentPage}))},buttonActiveClick:function(t){"重置"==t?(this.name=null,this.appletsManageId="",this.tabKey=null):this.initActivityManage()},selectAllClick:function(){console.log(),this.visible=!0},cancelAllClick:function(){this.selectedAll=[],this.selectedRowKeys=null},actionClick:function(t,e){"查看"==t?this.$refs.Create.open("拼团详情",e):(console.log(e),this.recordrow=e,this.visible=!0)},onSelectChange:function(t,e){console.log(t,e),this.selectedRowKeys=t,this.selectedAll=e,console.log(this.selectedAll)},handleApplyOk:function(){this.visible=!1},changeApplyState:function(t){var e=this;console.log(t),console.log(this.recordrow);var a,n=[],i=[];this.recordrow&&(a={fieldName:"id",fieldValue:this.recordrow.id}),this.selectedAll.length>0&&(this.selectedAll.forEach((function(t){t.id&&i.push(t.id)})),a={fieldName:"id",fieldValue:i.join(",")});var l={fieldName:"approval_status",fieldValue:t},c={fieldName:"approval_user",fieldValue:this.userName};n.push(a,c,l);var o={moduleFields:n,name:"activity_head_batch"};Object(s["c"])(o).then((function(t){e.visible=!1,e.selectedAll=[],e.initActivityManage()}))}},watch:{visible:function(){this.visible||(this.postApplyState=0)}}},r=o,u=(a("fdea"),a("2877")),d=Object(u["a"])(r,n,i,!1,null,"7fb0c384",null);e["default"]=d.exports},eec7:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"b",(function(){return l}));var n=a("b775");function i(t){return Object(n["a"])({url:"/v1/activitys/_search",method:"post",data:t,headers:{"Content-Type":"application/json"}})}function s(t){return Object(n["a"])({url:"/v1/activitys/_update",method:"put",data:t,headers:{"Content-Type":"application/json"}})}function l(t){return Object(n["a"])({url:"v1/activitys/recharge/_search",method:"post",data:t,headers:{"Content-Type":"application/json"}})}},fdea:function(t,e,a){"use strict";a("8b6e")}}]);