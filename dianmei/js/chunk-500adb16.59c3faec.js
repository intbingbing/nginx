(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-500adb16","chunk-2d224c6a"],{"3b44":function(e,t,a){"use strict";a("8a1a")},"4b40":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("BaseCard",{attrs:{title:"高级设置"}},[a("a-form-model",{ref:"ruleForm",attrs:{rules:e.rules,model:e.form,"label-col":{span:6},"wrapper-col":{span:16}}},[a("a-form-model-item",{attrs:{label:"凑团",prop:"makeGroup"}},[a("a-switch",{attrs:{"checked-children":"开","un-checked-children":"关",disabled:e.disabled},model:{value:e.form.makeGroup,callback:function(t){e.$set(e.form,"makeGroup",t)},expression:"form.makeGroup"}}),a("div",{staticClass:"tip"},[e._v("开启凑团后，对于未参团的买家，活动商品详情页会显示待成团的团列表，买家可以直接任选一个参团，提升成团率。")])],1),a("a-form-model-item",{attrs:{label:"模拟成团",prop:"analog"}},[a("a-switch",{attrs:{"checked-children":"开","un-checked-children":"关",disabled:e.disabled},model:{value:e.form.analog,callback:function(t){e.$set(e.form,"analog",t)},expression:"form.analog"}}),a("div",{staticClass:"tip"},[e._v(" 开启模拟成团后，该团有效期结束时，人数未满的团，系统将会模拟“匿名买家”凑满人数，使该团成团。只有已付款参团的真实买家才会获得商品，建议合理开启，以提高成团率。 ")])],1),a("a-form-model-item",{attrs:{label:"展示参团人数",prop:"exhibition"}},[a("a-switch",{attrs:{"checked-children":"开","un-checked-children":"关",disabled:e.disabled},model:{value:e.form.exhibition,callback:function(t){e.$set(e.form,"exhibition",t)},expression:"form.exhibition"}}),e.form.exhibition?a("a-input-number",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{min:0,max:99999,placeholder:"请填写0-99999的整数",disabled:e.disabled},model:{value:e.form.eNumber,callback:function(t){e.$set(e.form,"eNumber",t)},expression:"form.eNumber"}}):e._e(),a("div",{staticClass:"tip"},[e._v("开启展示后，拼团页面将展示“已有xx人参团”，参团人数为设定人数和实际参团人数之和，实时更新。")])],1),a("a-form-model-item",{attrs:{label:"弹幕",prop:"barrage"}},[a("a-switch",{attrs:{"checked-children":"开","un-checked-children":"关",disabled:e.disabled},model:{value:e.form.barrage,callback:function(t){e.$set(e.form,"barrage",t)},expression:"form.barrage"}}),a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",disabled:e.disabled},on:{click:function(){return e.$refs.Barrage.open(e.form.barrageList)}}},[e._v("设置弹幕")]),a("div",{staticClass:"tip"},[e._v("开启弹幕后，拼团页面将展示自定义设置的弹幕信息，客户发的弹幕只有客户自己可以看到。")])],1),a("a-form-model-item",{attrs:{label:"分享文案",prop:"shareText"}},[e._v(" "+e._s(e.form.shareText)+" "),a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",disabled:e.disabled},on:{click:function(){return e.$refs.ModText.open(e.form.shareText)}}},[e._v("修改文案")])],1),a("Barrage",{ref:"Barrage",on:{ok:e.setBarrageList}}),a("ModText",{ref:"ModText",on:{ok:e.setText}})],1)],1)},n=[],i=a("1da1"),s=(a("d3b7"),a("159b"),a("b64b"),a("96cf"),a("f6ef")),c=a("cd3f"),o=a.n(c),l=(a("c1df"),a("e229")),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("BaseModal",{ref:"BaseModal",attrs:{title:"弹幕设置",placeholder:"自定义弹幕内容，不超过20个字",enterButton:"添加弹幕",maxLength:20},on:{ok:e.handleOk,search:e.add}},[a("div",{staticClass:"content"},[e._v(" 请选择需要显示的弹幕"),a("a-checkbox",{staticClass:"margin-left-10",on:{change:e.selectAll},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v(" 全选 ")]),a("div",{staticClass:"select-area"},[e._v(" 系统默认弹幕 "),a("div",{staticClass:"default"},[a("a-row",{attrs:{gutter:[10,10],justify:"space-between"}},e._l(e.defaultList,(function(t,r){return a("a-col",{key:t+r,staticClass:"btn",style:e.selectList.includes(t)&&e.selectedStyle,on:{click:function(a){return e.negate(t)}}},[e._v(e._s(t))])})),1)],1),a("a-divider",{attrs:{dashed:""}}),a("div",{staticClass:"own"},[e._v(" 自定义弹幕 "),e.ownList.length?a("a-row",{attrs:{gutter:[10,10],justify:"space-between"}},e._l(e.ownList,(function(t,r){return a("a-col",{key:t+r,staticClass:"btn",style:e.selectList.includes(t)&&e.selectedStyle,on:{click:function(a){return e.negate(t)}}},[e._v(e._s(t))])})),1):a("div",[e._v("暂无自定义弹幕")])],1)],1)],1)])},u=[],f=a("2909"),h=(a("caad"),a("2532"),a("99af"),a("a434"),a("c593")),b=l["defaultBarrage"],m={name:"Barrage",components:{BaseModal:h["a"]},data:function(){return{defaultList:Object(f["a"])(b),selectList:Object(f["a"])(b),selectedStyle:{background:"#1890ff",color:"white"},ownList:[]}},created:function(){},mounted:function(){},computed:{checkAll:{get:function(){return this.ownList.length+this.defaultList.length===this.selectList.length},set:function(){}}},methods:{handleOk:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("ok",e.selectList);case 1:case"end":return t.stop()}}),t)})))()},open:function(e){var t=this;e.forEach((function(e){[].concat(Object(f["a"])(t.defaultList),Object(f["a"])(t.ownList)).includes(e)||t.ownList.push(e)})),this.selectList=e,this.$refs.BaseModal.open()},negate:function(e){var t=this.selectList.indexOf(e);-1===t?this.selectList.push(e):this.selectList.splice(t,1)},add:function(e){if([].concat(Object(f["a"])(this.defaultList),Object(f["a"])(this.ownList)).includes(e))return this.$message.error("重复的弹幕");this.ownList.push(e),this.selectList.push(e)},selectAll:function(e){e.target.checked?this.selectList=[].concat(Object(f["a"])(this.defaultList),Object(f["a"])(this.ownList)):this.selectList=[]}}},p=m,v=(a("7c5d"),a("2877")),g=Object(v["a"])(p,d,u,!1,null,"d35eda20",null),k=g.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("BaseModal",{ref:"BaseModal",attrs:{title:"修改文案",placeholder:"自定义文案内容，不超过25个字",enterButton:"添加文案",maxLength:25},on:{ok:e.handleOk,search:e.add}},[a("div",{staticClass:"content"},[e._v(" 请选择需要显示的文案 "),a("div",{staticClass:"select-area"},[a("a-radio-group",{model:{value:e.shareText,callback:function(t){e.shareText=t},expression:"shareText"}},[a("div",{staticClass:"default"},[a("div",[e._v("系统默认文案")]),e._l(e.defaultList,(function(t,r){return a("a-radio",{key:t+r,attrs:{value:t}},[e._v(e._s(t))])}))],2),a("a-divider",{attrs:{dashed:""}}),a("div",{staticClass:"own"},[a("div",[e._v("自定义文案")]),e.ownList.length?e._e():a("div",[e._v("暂无自定义文案")]),e._l(e.ownList,(function(t,r){return a("a-radio",{key:t+r,attrs:{value:t}},[e._v(e._s(t))])}))],2)],1)],1)])])},L=[],w=["[拼团人数]人拼团只要[拼团价]元，快来一起拼团"],O={name:"ModText",components:{BaseModal:h["a"]},data:function(){return{defaultList:[].concat(w),ownList:[],shareText:w[0]}},created:function(){},mounted:function(){},methods:{handleOk:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("ok",e.shareText);case 1:case"end":return t.stop()}}),t)})))()},open:function(e){[].concat(Object(f["a"])(this.defaultList),Object(f["a"])(this.ownList)).includes(e)||(this.ownList.push(e),this.shareText=e),this.$refs.BaseModal.open()},add:function(e){if([].concat(Object(f["a"])(this.defaultList),Object(f["a"])(this.ownList)).includes(e))return this.$message.error("重复的文案");this.ownList.push(e),this.shareText=e}}},_=O,j=(a("7865"),Object(v["a"])(_,x,L,!1,null,"c2f221bc",null)),y=j.exports,$={components:{BaseCard:s["a"],Barrage:k,ModText:y},props:["record","disabled"],data:function(){return{form:o()(l["defaultForm"]),rules:Object(l["rules"])(this)}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i,s,c,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.record&&(a=e.record,r=a.makeGroup,n=a.analog,i=a.exhibition,s=a.barrage,c=a.barrageList,o=a.shareText,l=a.eNumber,e.form={makeGroup:1===r,analog:1===n,exhibition:1===i,barrage:1===s,barrageList:c,shareText:o,eNumber:l});case 1:case"end":return t.stop()}}),t)})))()},methods:{check:function(){var e=this;return new Promise((function(t){e.$refs.ruleForm.validate((function(a){if(a){var r=o()(e.form);return Object.keys(r).forEach((function(e){!0===r[e]&&(r[e]=1),!1===r[e]&&(r[e]=2)})),t(r)}return t(!1)}))}))},setBarrageList:function(e){this.form.barrageList=e},setText:function(e){this.form.shareText=e}}},B=$,T=(a("3b44"),Object(v["a"])(B,r,n,!1,null,"83129ed2",null));t["default"]=T.exports},"4e1d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.type,destroyOnClose:!0,visible:e.visible,width:"60%",okText:"提交",wrapClassName:"full-modal-wrap"+(e.disabled?" no-footer":""),footer:e.disabled||void 0},on:{cancel:e.close}},[a("a-spin",{attrs:{spinning:e.queryLoading}},[a("BaseInfo",{ref:"BaseInfo",attrs:{record:e.record,disabled:e.disabled}}),a("AdvancedSettings",{ref:"AdvancedSettings",attrs:{record:e.record,disabled:e.disabled}})],1),e.disabled?e._e():a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:e.close}},[e._v(" 取消 ")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:e.confirmLoading},on:{click:e.handleOk}},[e._v(" 提交 ")])],1)],2)},n=[],i=a("5530"),s=a("1da1"),c=(a("96cf"),a("caad"),a("2532"),a("d3b7"),a("9378")),o=a("4b40"),l=a("0a99"),d={name:"create",components:{BaseInfo:c["default"],AdvancedSettings:o["default"]},props:["parent"],data:function(){return{visible:!1,type:"新建拼团",record:null,queryLoading:!1,confirmLoading:!1}},created:function(){},computed:{disabled:function(){return this.type.includes("详情")}},methods:{handleOk:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.BaseInfo.check();case 2:return a=t.sent,t.next=5,e.$refs.AdvancedSettings.check();case 5:r=t.sent,r&&a&&(e.confirmLoading=!0,"新建拼团"===e.type?Object(l["a"])(Object(i["a"])(Object(i["a"])({},r),a)).then((function(t){e.$message.success("新建成功"),e.parent?e.parent.refresh():e.$parent&&e.$parent.refresh(),e.visible=!1})).catch((function(e){})).finally((function(){e.confirmLoading=!1})):(n=Object(i["a"])(Object(i["a"])(Object(i["a"])({},r),a),{},{id:e.record.id}),Object(l["e"])(n).then((function(t){e.$message.success("更新成功"),e.parent?e.parent.refresh(Object(i["a"])(Object(i["a"])({},e.record),n)):e.$parent&&e.$parent.refresh(Object(i["a"])(Object(i["a"])({},e.record),n)),e.visible=!1})).catch((function(e){})).finally((function(){e.confirmLoading=!1}))));case 7:case"end":return t.stop()}}),t)})))()},close:function(){this.visible=!1},open:function(e,t){var a=this;this.visible=!0,this.type=e,e.includes("编辑")||e.includes("详情")?(this.queryLoading=!0,t.id?Object(l["d"])({id:t.id,page:1,pageSize:10}).then((function(e){a.record=e.data[0],a.queryLoading=!1})):(this.record=t,this.queryLoading=!1)):this.record=t}}},u=d,f=a("2877"),h=Object(f["a"])(u,r,n,!1,null,"03fd8892",null);t["default"]=h.exports},7865:function(e,t,a){"use strict";a("f798")},"7c5d":function(e,t,a){"use strict";a("e90d")},"8a1a":function(e,t,a){},e229:function(e,t,a){"use strict";a.r(t),a.d(t,"defaultBarrage",(function(){return r})),a.d(t,"defaultForm",(function(){return n})),a.d(t,"rules",(function(){return i}));a("c1df");var r=["服务很赞！","效果很不错的","接待超贴心的！","已开团，求成团！(￣▽￣)~*","去过的都说说，怎么样啊","推荐提前预约，会更节省时间一点~","种草很久了！","很nice的服务，物超所值","小姐姐超温柔der(*≧∪≦)","坐等成团ing......"],n={makeGroup:!0,analog:!0,exhibition:!1,barrage:!0,barrageList:r,shareText:"[拼团人数]人拼团只要[拼团价]元，快来一起拼团",eNumber:void 0};function i(e){return{exhibition:[{validator:function(t,a,r){e.form.exhibition&&!e.form.eNumber?(0===e.form.eNumber&&r(),r(new Error("请填写参团人数"))):r()},trigger:"blur"}]}}},e90d:function(e,t,a){},f798:function(e,t,a){}}]);