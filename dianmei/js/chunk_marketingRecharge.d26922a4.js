(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk_marketingRecharge","chunk-2d0df494"],{"197f":function(e,t,a){"use strict";a("2ee7")},"2ee7":function(e,t,a){},"3fe3":function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return l})),a.d(t,"g",(function(){return s})),a.d(t,"e",(function(){return u})),a.d(t,"h",(function(){return d})),a.d(t,"f",(function(){return m})),a.d(t,"b",(function(){return f}));a("159b"),a("4de4");var n=a("b775"),r=a("da46"),i=a("ca00");function o(e){return Object(n["a"])({url:"/v1/module/homepage/_search",method:"post",data:e}).then((function(e){if(e.forEach((function(e){var t=r["moduleType"].filter((function(t){return t.value===e.moduleType}));e.moduleNote=t[0].label})),e.length>2){for(var t=0;t<2;t++)e[t].up=e[t].down=!1;for(var a=[],n=2;n<e.length;n++)a.push(e[n]);Object(i["a"])(a)}else for(var o=0;o<e.length;o++)e[o].up=e[o].down=!1;return Object(i["g"])(e)}))}function c(e){return Object(n["a"])({url:"/v1/activitys/_search",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/v1/module/homepage/addMarketing",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/v1/module/homepage/update/".concat(e.id),method:"put",data:e})}var u=s;function d(e){return Object(n["a"])({url:"/v1/module/_update",method:"put",data:e})}function m(e){return Object(n["a"])({url:"/v1/activitys/_update",method:"put",data:e})}function f(e){return Object(n["a"])({url:"/v1/module/homepage/addGroup",method:"post",data:e})}},7121:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("s-table",{ref:"table",attrs:{rowKey:"id",columns:e.columns,data:e.loadData,condition:e.condition},scopedSlots:e._u([{key:"serial",fn:function(t,n,r){return a("span",{},[e._v(" "+e._s(r+1)+" ")])}},{key:"action",fn:function(t,n){return a("span",{},[[a("span",{on:{click:function(t){return e.action("编辑充值有礼",n)}}},[a("a",[e._v("编辑")])]),a("a-divider",{attrs:{type:"vertical"}}),2!==n.status?a("span",[a("a-popconfirm",{attrs:{title:"确定停止?","ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.action("停止",n)}}},[a("span",[a("a",[e._v("停止")])])]),a("a-divider",{attrs:{type:"vertical"}})],1):e._e(),a("a-popconfirm",{attrs:{title:"确定删除?","ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.action("删除",n)}}},[a("span",[a("a",[e._v("删除")])])])]],2)}}])},[a("a-button",{staticStyle:{"margin-bottom":"10px"},attrs:{slot:"middle",type:"dashed",block:"",icon:"plus"},on:{click:function(t){return e.action("新建充值有礼",null)}},slot:"middle"},[e._v(" 新建充值有礼 ")])],1),a("Create",{ref:"Create",attrs:{parent:e.that}})],1)},r=[],i=a("ab09"),o=a("fad4"),c=a("88ec"),l=a("b28e"),s=a("3fe3"),u={components:{STable:i["a"],Create:l["default"]},data:function(){return{loading:!1,columns:c["columns"],queryParam:{},condition:c["condition"],loadData:function(e){return Object(o["b"])(e)},that:this}},mounted:function(){},methods:{action:function(e,t){var a=this;"编辑充值有礼"===e||"新建充值有礼"===e?this.$refs.Create.open(e,t):"停止"===e?Object(s["f"])({moduleFields:[{fieldName:"id",fieldValue:t.id},{fieldName:"status",fieldValue:2}]}).then((function(e){a.$message.success("停止成功！"),a.refresh()})):"删除"===e&&Object(s["f"])({moduleFields:[{fieldName:"id",fieldValue:t.id},{fieldName:"is_delete",fieldValue:1}]}).then((function(e){a.$message.success("删除成功！"),a.refresh()}))},refresh:function(){this.$refs.table.refresh()}}},d=u,m=a("2877"),f=Object(m["a"])(d,n,r,!1,null,null,null);t["default"]=f.exports},"88ec":function(e,t,a){"use strict";a.r(t),a.d(t,"columns",(function(){return n})),a.d(t,"condition",(function(){return r}));a("99af");var n=[{title:"#",scopedSlots:{customRender:"serial"}},{title:"活动名称",dataIndex:"name"},{title:"有效时间",customRender:function(e,t,a){return"".concat(t.startTime,"至").concat(t.endTime)}},{title:"活动状态",dataIndex:"statusNote"},{title:"创建时间",dataIndex:"createTime"},{title:"总部审批",dataIndex:"approvalStatusNote"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],r=[{title:"活动名称",dataIndex:"name",type:"input"},{title:"活动状态",dataIndex:"status",type:"select",defaultValue:0,options:[{label:"未开始",value:0},{label:"进行中",value:1},{label:"已停止",value:2}]},{title:"创建时间",dataIndex:"createTime",type:"time-range"},{title:"有效时间",dataIndex:"cc_you_xiao",type:"time-range"},{title:"总部审批",dataIndex:"approvalStatus",type:"select",defaultValue:0,options:[{label:"待审批",value:0},{label:"同意",value:1},{label:"拒绝",value:2}]}]},b28e:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{staticClass:"height-modal",attrs:{wrapClassName:"full-modal-wrap"+(e.disabled?" no-footer":""),title:e.type,destroyOnClose:!0,visible:e.visible,width:"60%",okText:"提交",footer:e.disabled||void 0},on:{cancel:e.close}},[a("ActivityInfo",{ref:"ActivityInfo",attrs:{record:e.record,disabled:e.disabled}}),a("ActivityDetail",{ref:"ActivityDetail",attrs:{record:e.record,disabled:e.disabled}}),a("ActivityRule",{ref:"ActivityRule",attrs:{record:e.record,disabled:e.disabled}}),e.disabled?e._e():a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:e.close}},[e._v(" 取消 ")]),a("a-button",{key:"submit",attrs:{type:"primary"},on:{click:e.handleOk}},[e._v(" 提交 ")])],1)],2)},r=[],i=a("5530"),o=a("1da1"),c=(a("96cf"),a("caad"),a("2532"),a("4fa5")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("baseCard",{attrs:{title:"活动详情页面管理"}},[a("a-form-model",{ref:"dynamicValidateForm",attrs:{model:e.dynamicValidateForm,"label-col":{span:4},"wrapper-col":{span:19}}},[e._l(e.dynamicValidateForm.domains,(function(t,n){return a("a-form-model-item",{key:t.key,attrs:{label:t.label,required:!0}},[a("a-row",[a("a-col",{attrs:{span:18}},[1===t.type?a("a-input",{attrs:{placeholder:"请输入",disabled:e.disabled},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):2===t.type?a("a-textarea",{attrs:{placeholder:"请输入","allow-clear":"",disabled:e.disabled,"auto-size":{minRows:2,maxRows:6}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):a("ImgUpload",{attrs:{disabled:e.disabled},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}),a("div",{staticClass:"err"},[e._v(e._s(t.err))])],1),e.disabled?e._e():a("a-col",{staticStyle:{"padding-left":"10px"},attrs:{span:6}},[t.down?a("span",[a("a-icon",{attrs:{type:"arrow-down"},on:{click:function(a){return e.swap("down",n,t)}}}),e._v(" "),a("a-divider",{attrs:{type:"vertical"}})],1):e._e(),t.up?a("span",[a("a-icon",{attrs:{type:"arrow-up"},on:{click:function(a){return e.swap("up",n,t)}}}),e._v(" "),a("a-divider",{attrs:{type:"vertical"}})],1):e._e(),a("a-icon",{attrs:{type:"minus-circle-o"},on:{click:function(t){return e.del(n)}}})],1)],1)],1)})),a("a-row",[a("a-col",{attrs:{span:4}}),a("a-col",{attrs:{span:14}},[a("a-dropdown",{attrs:{disabled:e.disabled}},[a("a-menu",{attrs:{slot:"overlay"},on:{click:e.create},slot:"overlay"},e._l(e.menu,(function(t){return a("a-menu-item",{key:t.value+"-"+t.label},[e._v(" "+e._s(t.label)+" ")])})),1),a("a-button",[e._v(" 添加内容 "),a("a-icon",{attrs:{type:"down"}})],1)],1)],1)],1)],2)],1)},s=[],u=a("3835"),d=(a("d81d"),a("d3b7"),a("159b"),a("a434"),a("1276"),a("ac1f"),a("a9e3"),a("f6ef")),m=a("cd3f"),f=a.n(m),p=a("d549"),b=a("ca00"),v={name:"activityDetail",components:{baseCard:d["a"],ImgUpload:p["a"]},props:["record","disabled"],data:function(){return{formItemLayout:{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},formItemLayoutWithOutLabel:{wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}},dynamicValidateForm:{domains:[]},menu:[{value:1,label:"标题"},{value:2,label:"内容"},{value:3,label:"图片"}],rules:{}}},created:function(){var e;null!==(e=this.record)&&void 0!==e&&e.pageManagements?this.dynamicValidateForm.domains=Object(b["a"])(this.record.pageManagements.map((function(e,t){return{value:e.value,key:t,type:e.type,label:e.label,err:""}}))):this.dynamicValidateForm.domains=Object(b["a"])(this.menu.map((function(e){return{value:"",key:e.value,type:e.value,label:e.label,err:""}})))},methods:{check:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.dynamicValidateForm.domains,t.abrupt("return",new Promise((function(e){var t=!0;a.forEach((function(e){e.value?e.err="":(e.err="请填写",t=!1)})),e(!!t&&{pageManagements:a})})));case 2:case"end":return t.stop()}}),t)})))()},del:function(e){var t=f()(this.dynamicValidateForm.domains);t.splice(e,1),this.dynamicValidateForm.domains=Object(b["a"])(t)},create:function(e){var t=e.key,a=t.split("-"),n=Object(u["a"])(a,2),r=n[0],i=n[1],o=f()(this.dynamicValidateForm.domains);o.push({value:"",key:Date.now(),type:Number(r),label:i}),this.dynamicValidateForm.domains=Object(b["a"])(o)},swap:function(e,t,a){var n=f()(this.dynamicValidateForm.domains);"up"===e?Object(b["d"])(n,t,t-1):Object(b["d"])(n,t,t+1),this.dynamicValidateForm.domains=Object(b["a"])(n)}}},h=v,y=(a("197f"),a("2877")),g=Object(y["a"])(h,l,s,!1,null,"41b0fbca",null),w=g.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("baseCard",{attrs:{title:"活动规则管理"}},[a("a-form-model",{ref:"ruleForm",attrs:{rules:e.rules,model:e.form,"label-col":{span:4},"wrapper-col":{span:14}}},[a("a-form-model-item",{attrs:{label:"标题",prop:"title"}},[a("a-input",{attrs:{placeholder:"请输入",disabled:e.disabled},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("a-form-model-item",{attrs:{label:"内容",prop:"content"}},[a("a-textarea",{attrs:{placeholder:"请输入","allow-clear":"",disabled:e.disabled,"auto-size":{minRows:2,maxRows:6}},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1)],1)},_=[],O={title:"",content:""},x={name:"activityRule",components:{baseCard:d["a"]},props:["record","disabled"],data:function(){return{form:f()(O),rules:{title:[{required:!0,message:"请输入",trigger:"blur"}],content:[{required:!0,message:"请选择",trigger:"blur"}]}}},created:function(){if(this.record&&this.record.ruleManagement){var e=this.record.ruleManagement,t=e.title,a=e.content;this.form={title:t,content:a}}},methods:{check:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){e.$refs.ruleForm.validate((function(a){return t(!!a&&{ruleManagement:e.form})}))})));case 1:case"end":return t.stop()}}),t)})))()}}},j=x,R=Object(y["a"])(j,k,_,!1,null,null,null),V=R.exports,$=a("fad4"),I={name:"create",components:{ActivityInfo:c["a"],ActivityDetail:w,ActivityRule:V},props:["parent"],data:function(){return{visible:!1,type:"新建充值有礼",record:null}},computed:{disabled:function(){return this.type.includes("详情")}},mounted:function(){},methods:{handleOk:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.ActivityInfo.check();case 2:return a=t.sent,t.next=5,e.$refs.ActivityDetail.check();case 5:return n=t.sent,t.next=8,e.$refs.ActivityRule.check();case 8:r=t.sent,n&&a&&r&&(e.visible=!1,"新建充值有礼"===e.type?Object($["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},n),a),r)).then((function(t){e.$message.success("新建成功"),e.parent.refresh()})):Object($["c"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},n),a),r),{},{id:e.record.id})).then((function(t){e.$message.success("更新成功"),e.parent.refresh()})));case 10:case"end":return t.stop()}}),t)})))()},close:function(){this.visible=!1},open:function(e,t){this.visible=!0,this.type=e,this.record=t}}},F=I,C=(a("f7be"),Object(y["a"])(F,n,r,!1,null,"59ae30c7",null));t["default"]=C.exports},f7be:function(e,t,a){"use strict";a("fbd2")},fad4:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return o}));var n=a("b775");function r(e){var t=e.cc_you_xiao,a=e.createTime;return t&&2===t.length&&(e.esDate=t[0]+" 00:00:00",e.eeDate=t[1]+" 23:59:59",delete e.cc_you_xiao),a&&2===a.length&&(e.csDate=a[0]+" 00:00:00",e.ceDate=a[1]+" 23:59:59",delete e.createTime),Object(n["a"])({url:"/v1/activitys/recharge/_search",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/v1/activity/recharge",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/v1/activity/recharge/"+e.id,method:"put",data:e})}},fbd2:function(e,t,a){}}]);