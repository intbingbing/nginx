(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-213c2b9e"],{"22a9":function(e,t,r){"use strict";r("f2cb")},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var a=r("1d80"),o=r("5899"),n="["+o+"]",s=RegExp("^"+n+n+"*"),c=RegExp(n+n+"*$"),i=function(e){return function(t){var r=String(a(t));return 1&e&&(r=r.replace(s,"")),2&e&&(r=r.replace(c,"")),r}};e.exports={start:i(1),end:i(2),trim:i(3)}},7156:function(e,t,r){var a=r("861d"),o=r("d2bb");e.exports=function(e,t,r){var n,s;return o&&"function"==typeof(n=t.constructor)&&n!==r&&a(s=n.prototype)&&s!==r.prototype&&o(e,s),e}},7809:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-modal",{attrs:{title:e.type,visible:e.visible,width:"50%",wrapClassName:"full-modal-wrap"},on:{cancel:e.close}},[r("a-form-model",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-col":{span:6},"wrapper-col":{span:16}}},[r("a-form-model-item",{attrs:{label:"分公司小程序",prop:"appletsName"}},[r("a-input",{attrs:{placeholder:"请输入"},model:{value:e.form.appletsName,callback:function(t){e.$set(e.form,"appletsName",t)},expression:"form.appletsName"}})],1),r("a-form-model-item",{attrs:{label:"AppID",prop:"appId"}},[r("a-input",{attrs:{placeholder:"请输入"},model:{value:e.form.appId,callback:function(t){e.$set(e.form,"appId",t)},expression:"form.appId"}})],1),r("a-form-model-item",{attrs:{label:"Code",prop:"code"}},[r("a-input",{attrs:{placeholder:"请输入",disabled:"编辑"===e.type},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),r("a-form-model-item",{attrs:{label:"状态",prop:"status"}},[r("a-select",{attrs:{placeholder:"请选择"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.$dict.status,(function(t){return r("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1),r("a-form-model-item",{attrs:{label:"活动是否需要审批",prop:"activityApproval"}},[r("a-select",{attrs:{placeholder:"请选择"},model:{value:e.form.activityApproval,callback:function(t){e.$set(e.form,"activityApproval",t)},expression:"form.activityApproval"}},e._l(e.$dict.activityApproval,(function(t){return r("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1),r("a-form-model-item",{attrs:{label:"区域名称",prop:"area"}},[r("a-input",{attrs:{placeholder:"请输入"},model:{value:e.form.area,callback:function(t){e.$set(e.form,"area",t)},expression:"form.area"}})],1),r("div",{staticClass:"scroll"},[r("a-form-model-item",{attrs:{label:"作用范围",prop:"companyIds"}},[r("a-tree",{attrs:{checkable:"","auto-expand-parent":!0,"tree-data":e.treeData,"show-line":!0,"show-icon":!0,replaceFields:e.replaceFields},model:{value:e.form.companyIds,callback:function(t){e.$set(e.form,"companyIds",t)},expression:"form.companyIds"}})],1)],1)],1),r("template",{slot:"footer"},[r("a-button",{key:"back",on:{click:e.close}},[e._v(" 取消 ")]),r("a-button",{key:"submit",attrs:{type:"primary",loading:e.loading},on:{click:e.handleOk}},[e._v(" 提交 ")])],1)],2)},o=[],n=r("5530"),s=(r("159b"),r("b0c0"),r("d3b7"),r("d81d"),r("1276"),r("ac1f"),r("a9e3"),r("b64b"),r("8635")),c=r("ca00"),i=r("cd3f"),l=r.n(i),u={appletsName:"",status:void 0,activityApproval:void 0,appId:"",area:"",companyIds:[],code:""},p={data:function(){return{visible:!1,type:"新建",labelCol:{span:4},wrapperCol:{span:14},other:"",form:l()(u),rules:{appletsName:[{required:!0,message:"请输入",trigger:"blur"},{max:50,message:"长度不能超过50",trigger:"blur"}],status:[{required:!0,message:"请选择",trigger:"blur"}],activityApproval:[{required:!0,message:"请选择",trigger:"blur"}],appId:[{required:!0,message:"请输入",trigger:"blur"},{required:!0,validator:function(e,t,r){/^[0-9a-zA-Z]+$/.test(t)||r(new Error("限制字母或数字")),r()},trigger:"blur"}],code:[{required:!0,message:"请输入",trigger:"blur"},{validator:function(e,t,r){/^[0-9a-zA-Z]+$/.test(t)||r(new Error("限制字母或数字")),r()},trigger:"blur"},{max:10,message:"长度不能超过10",trigger:"blur"}],area:[{required:!0,message:"请输入",trigger:"blur"},{max:50,message:"长度不能超过50",trigger:"blur"}],companyIds:[{required:!0,message:"请选择",trigger:"blur"}]},treeData:[],replaceFields:{children:"children",title:"name",key:"id"},record:{},loading:!1}},created:function(){console.log(this.record)},mounted:function(){},methods:{handleOk:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0;var r={};e.form.companyIds.forEach((function(t){var a=Object(c["c"])(t,e.treeData);r[a.id]=a.name})),"编辑"===e.type?Object(s["e"])(Object(n["a"])(Object(n["a"])({},e.form),{},{companyMap:r,id:e.record.id})).then((function(t){e.$message.success("更新成功"),e.$parent.refresh(),e.visible=!1})).catch((function(e){})).finally((function(){e.loading=!1})):Object(s["a"])(Object(n["a"])(Object(n["a"])({},e.form),{},{companyMap:r})).then((function(t){e.$message.success("新建成功"),e.$parent.refresh(),e.visible=!1})).catch((function(e){})).finally((function(){e.loading=!1}))}))},close:function(){this.visible=!1,this.$refs.ruleForm.resetFields()},open:function(e,t){var r=this;this.visible=!0,this.type=e;var a=l()(t);this.record=a,"编辑"===e?(a.companyIds=a.companyIds?a.companyIds.split(",").map((function(e){return Number(e)})):[],Object.keys(u).forEach((function(e){return r.form[e]=a[e]}))):this.form=l()(u),Object(s["c"])({userId:2}).then((function(e){return r.treeData=e}))}}},f=p,d=(r("22a9"),r("2877")),m=Object(d["a"])(f,a,o,!1,null,"2e6369ae",null);t["default"]=m.exports},8635:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return s})),r.d(t,"e",(function(){return c})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return l}));var a=r("b775"),o=r("ca00");function n(e){return Object(a["a"])({url:"/v1/applets/_search",method:"post",data:e}).then((function(e){return Object(o["g"])(e)}))}function s(e){return Object(a["a"])({url:"/v1/applets",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/v1/applets/"+e.id,method:"put",data:e})}function i(e){return Object(a["a"])({url:"/v1/tree/init",method:"GET",params:e})}function l(e){return Object(a["a"])({url:"/v1/applets/status/".concat(e.id),method:"put",data:e,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})}},a9e3:function(e,t,r){"use strict";var a=r("83ab"),o=r("da84"),n=r("94ca"),s=r("6eeb"),c=r("5135"),i=r("c6b6"),l=r("7156"),u=r("c04e"),p=r("d039"),f=r("7c73"),d=r("241c").f,m=r("06cf").f,b=r("9bf2").f,v=r("58a8").trim,g="Number",h=o[g],y=h.prototype,I=i(f(y))==g,N=function(e){var t,r,a,o,n,s,c,i,l=u(e,!1);if("string"==typeof l&&l.length>2)if(l=v(l),t=l.charCodeAt(0),43===t||45===t){if(r=l.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:a=2,o=49;break;case 79:case 111:a=8,o=55;break;default:return+l}for(n=l.slice(2),s=n.length,c=0;c<s;c++)if(i=n.charCodeAt(c),i<48||i>o)return NaN;return parseInt(n,a)}return+l};if(n(g,!h(" 0o1")||!h("0b1")||h("+0x1"))){for(var k,A=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof A&&(I?p((function(){y.valueOf.call(r)})):i(r)!=g)?l(new h(N(t)),r,A):N(t)},O=a?d(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),w=0;O.length>w;w++)c(h,k=O[w])&&!c(A,k)&&b(A,k,m(h,k));A.prototype=y,y.constructor=A,s(o,g,A)}},f2cb:function(e,t,r){}}]);